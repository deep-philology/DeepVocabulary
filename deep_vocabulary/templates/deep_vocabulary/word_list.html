{% extends "site_base.html" %}

{% load humanize %}

{% block head_title %}{{ text_edition.text_group_label }}, {{ text_edition.work_label }}{% if ref %} {{ ref }}{% endif %}{% endblock %}

{% block body_base %}
  <section class="hero">
    <div class="container">
      <div class="row">
        <div class="col">
          <h2>
            {% if ref %}
              <a href="{% url 'word_list' text_edition.cts_urn %}">{{ text_edition.text_group_label }}, {{ text_edition.work_label }}{% if text_edition.is_core %}*{% endif %}</a> {{ ref }}
            {% else %}
              {{ text_edition.text_group_label }}, {{ text_edition.work_label }}{% if text_edition.is_core %}*{% endif %}
            {% endif %}
          </h2>
          <h1>Word List</h1>
        </div>
        <div class="col text-right">
          <div><tt>{{ cts_urn}}</tt></div>
          <div><a href="{% url 'reader_redirect' cts_urn %}" target="_blank">read in Scaife Viewer <i class="fa fa-external-link"></i></a></div>
        </div>
      </div>
    </div>
  </section>

  <section class="main">
    <div class="container">

      <div class="row word-list-controls">
        <div class="col">
          {% include "deep_vocabulary/_passage_citation_form.html" %}
        </div>
        <div class="col">
          {% include "deep_vocabulary/_frequency_filter.html" %}
        </div>
      </div>

      <div class="row">
        <div class="col">
          {% if lemmas.paginator %}
            {% include "deep_vocabulary/_pagination.html" %}
            <a style="margin-left: 1em" href="?{% if extra_query_params %}{{ extra_query_params }}&amp;{% endif %}page=all">SHOW ALL</a>
          {% else %}
            <a href="?{% if extra_query_params %}{{ extra_query_params }}&amp;{% endif %}page=1">PAGINATE</a>
          {% endif %}
        </div>
        <div class="col text-right">
          {% if lemmas.paginator %}
            <b>{{ lemmas.start_index }}&ndash;{{ lemmas.end_index }}</b>
          of <b>{{ lemma_count|intcomma }}</b> lemma{{ lemma_count|pluralize }};
          {% else %}
            <b>{{ lemma_count|intcomma }}</b> lemma{{ lemma_count|pluralize }};
          {% endif %}
          <b>{{ token_count|intcomma }}</b> token{{ token_count|pluralize }}
        </div>
      </div>

      <table class="word-list table table-sm table-hover">
        <thead>
          <tr>
            <th>word
            <th>shortdef
            <th class="text-right">count
            <th class="text-right">frequency
            <th class="text-right">corpus&nbsp;freq.
            <th class="text-right">core&nbsp;freq.
            {% if not ref %}
              <th class="text-center">log&nbsp;ratio
            {% endif %}
          </tr>
        </thead>
        {% for item in lemmas %}
          <tr{% if item.boosted %} class="table-info"{% endif %}>
            <th class="lemma_text"><a href="{% url 'lemma_detail' item.lemma_id %}?filter={{ text_edition.cts_urn }}">{{ item.lemma_text }}</a>
            <td class="shortdef">{{ item.shortdef }}
            <td class="count">{{ item.count|intcomma }}
            <td class="frequency">{{ item.frequency }}
            <td class="frequency">{{ item.corpus_frequency }}
            <td class="frequency">{{ item.core_frequency }}
            {% if not ref %}
            <td class="frequency text-center">{% spaceless %}
              {% if item.ratio is not None %}
                {% include "deep_vocabulary/_ratio.html" %}
              {% endif %}
              {% endspaceless %}
            </td>
            {% endif %}
          </tr>
        {% endfor %}
      </table>

      <p>
        {% if lemmas.paginator %}
          {% include "deep_vocabulary/_pagination.html" %}
          <a style="margin-left: 1em" href="?{% if request.GET.o %}o={{ request.GET.o }}&amp;{% endif %}page=all">SHOW ALL</a>
        {% else %}
          <a href="?{% if request.GET.o %}o={{ request.GET.o }}&amp;{% endif %}page=1">PAGINATE</a>
        {% endif %}
      </p>

    </div>
  </section>
{% endblock %}
