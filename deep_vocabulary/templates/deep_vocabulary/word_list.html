{% extends "site_base.html" %}

{% load humanize %}

{% block head_title %}{{ text_edition.text_group_label }}, {{ text_edition.work_label }}{% if ref_prefix %} {{ ref_prefix }}{% endif %}{% endblock %}

{% block body_base %}
  <section class="hero">
    <div class="container">
      <h2>
        {% if ref_prefix %}
          <a href="{% url 'word_list_by_work' text_edition.cts_urn %}">{{ text_edition.text_group_label }}, {{ text_edition.work_label }}{% if text_edition.is_core %}*{% endif %}</a> {{ ref_prefix }}
        {% else %}
          {{ text_edition.text_group_label }}, {{ text_edition.work_label }}{% if text_edition.is_core %}*{% endif %}
        {% endif %}
      </h2>
      <h1>Word List</h1>
    </div>
  </section>

  <section class="main">
    <div class="container">

      <p class="lead text-right">
        {{ vocabulary|length|intcomma }} lemma{{ vocabulary|length|pluralize }};
        {{ token_total|intcomma }} token{{ token_total|pluralize }}
      </p>

      <table class="word-list table table-sm table-hover">
        <thead>
          <tr>
            <th>word
            <th>shortdef
            <th class="text-right">count
            <th class="text-right">frequency
            <th class="text-right">corpus&nbsp;freq.
            <th class="text-right">core&nbsp;freq.
            {% if not ref_prefix %}
              <th class="text-right">log&nbsp;ratio
            {% endif %}
          </tr>
        </thead>
        {% for item in vocabulary %}
          <tr{% if item.boosted %} class="table-info"{% endif %}>
            <th class="lemma_text"><a href="{% url 'lemma_detail' item.lemma_id %}?filter={{ text_edition.cts_urn }}">{{ item.lemma_text }}</a>
            <td class="shortdef">{{ item.shortdef }}
            <td class="count">{{ item.count|intcomma }}
            <td class="frequency">{{ item.frequency }}
            <td class="frequency">{{ item.corpus_frequency }}
            <td class="frequency">{{ item.core_frequency }}
            {% if not ref_prefix %}
            <td class="frequency text-center">{% spaceless %}
              {% if item.log_ratio is not None %}
              <span style="color: {% if item.log_ratio <= -6 %}#A00{% else %}transparent{% endif %};">█</span>
              <span style="color: {% if item.log_ratio <= -5 %}#B22{% else %}transparent{% endif %};">█</span>
              <span style="color: {% if item.log_ratio <= -4 %}#C44{% else %}transparent{% endif %};">█</span>
              <span style="color: {% if item.log_ratio <= -3 %}#D66{% else %}transparent{% endif %};">█</span>
              <span style="color: {% if item.log_ratio <= -2 %}#D88{% else %}transparent{% endif %};">█</span>
              <span style="color: {% if item.log_ratio <= -1 %}#EAA{% else %}transparent{% endif %};">█</span>
              <span style="color: #EEE;">█</span>
              <span style="color: {% if item.log_ratio >= 1 %}#AEA{% else %}transparent{% endif %};">█</span>
              <span style="color: {% if item.log_ratio >= 2 %}#8D8{% else %}transparent{% endif %};">█</span>
              <span style="color: {% if item.log_ratio >= 3 %}#6D6{% else %}transparent{% endif %};">█</span>
              <span style="color: {% if item.log_ratio >= 4 %}#4C4{% else %}transparent{% endif %};">█</span>
              <span style="color: {% if item.log_ratio >= 5 %}#2B2{% else %}transparent{% endif %};">█</span>
              <span style="color: {% if item.log_ratio >= 6 %}#0A0{% else %}transparent{% endif %};">█</span>
              {% endif %}
              {% endspaceless %}
            </td>
            {% endif %}
          </tr>
        {% endfor %}
      </table>
    </div>
  </section>
{% endblock %}
